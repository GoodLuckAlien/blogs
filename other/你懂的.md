come on!!! 三道题

## 1 编写curry.js（柯里化）

实现函数的分步调用

````js

var curry = require('./curry.js');
 
function add(a, b) {
    return a + b;
}
 
var curried = curry(add);
console.log(curried(1)(2)); // 3 
 
function add2(a, b, c) {
    return a + b + c;
}
 
var curried2 = curry(add2);
console.log(curried2(1)(2)(3)); // 6
 
function add3(a, b, c, d) {
    return a + b + c + d;
}
 
var curried3 = curry(add3);
console.log(curried3(1)(2)(3)(4)); // 10

````



## 2编写middleware.js(中间件)

````js
var Middleware = require('./middleware.js');  // <- this is the file you make;
 
var middleware = new Middleware();
 
middleware.use(function(next) {
    var self = this;
    setTimeout(function() {
        self.hook1 = true;
        next();
    }, 10);
});
 
middleware.use(function(next) {
    var self = this;
    setTimeout(function() {
        self.hook2 = true;
        next();
    }, 10);
});
 
var start = new Date();
middleware.go(function() {
    console.log(this.hook1); 
    // true
    console.log(this.hook2); 
    // true
    console.log(new Date() - start); 
    // around 20
});

````



## 3编写async.js (异步+promise)

实现一个async对象，为此对象封装了方法，可以进行事件的队列、并行、竞速的处理。

````js
var async = require('./async.js');// <- this is the file you make;
 
var getUser = function(userId) {
    return function(cb) {
        setTimeout(function() {
            cb(null, {userId: userId, name: 'Joe'});
        },  100);
    };
};
 
var upperCaseName = function(cb, user) {
    cb(null, user.name.toUpperCase());
};
 
var lowerCaseName = function(cb, name) {
    cb(null, name.toLowerCase())
}
 
var userThunk = getUser(22);
 
async.sequence([userThunk, upperCaseName,lowerCaseName])(function(err, data) {
    console.log(data); 
});
 
 
var userThunk1 = getUser(1);
var userThunk2 = getUser(2);
 
async.parallel([userThunk1, userThunk2])(function(err, users) {
    console.log(users); 
    // [ { userId: 1, name: 'Joe' }, { userId: 2, name: 'Joe' } ]
});
 
var faster = function(cb) {
    setTimeout(cb.bind(null, null, "I'm faster"), 10);
};
 
async.race([userThunk1, faster])(function(err, winner) {
    console.log(winner); 
    // I'm faster
});


````