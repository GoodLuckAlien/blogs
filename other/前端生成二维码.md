
# çº¯å‰ç«¯å®ç°ä¸€é”®ç”ŸæˆäºŒç»´ç ,æ‰“å¼€æ–°é¡µé¢å±•ç¤ºäºŒç»´ç ï¼ˆåŸæ¥å¯ä»¥è¿™ä¹ˆç®€å•ï¼‰

 >  å‰è¨€ï¼šç›¸ä¿¡ä¸å°‘åŒå­¦åœ¨å®é™…å·¥ä½œä¸­åšé¡¹ç›®çš„æ—¶å€™ä¼šé‡åˆ°ç‚¹å‡»å½¢æˆäºŒç»´ç ï¼Œè·³è½¬æ–°çš„é¡µé¢å±•ç¤ºäºŒç»´ç çš„é¡¹ç›®éœ€æ±‚ã€‚è§£å†³é—®é¢˜çš„æ€è·¯å®é™…åˆå¾ˆå¤šç§ï¼Œä»Šå¤©ç¬”è€…ä»‹ç»ä¸€ä¸ªç®€å•å®ç°çš„æ€è·¯ï¼Œä¾›å¤§å®¶å‚è€ƒï¼Œå®é™…å®ç°è¿™ä¸ªå°åŠŸèƒ½å…¶å®æ˜¯ç‰¹åˆ«ç®€å•çš„ã€‚

## demoæ•ˆæœ

## æ€è€ƒå¦‚ä½•è®©å®ç°

**å¦‚ä½•å®ç°è¿™ä¸ªéœ€æ±‚å‘¢**

é¦–å…ˆæˆ‘ä»¬éœ€è¦ç”ŸæˆäºŒç»´ç ï¼Œè€Œä¸”è¦æ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢å±•ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦imgæ ‡ç­¾æ¥å±•ç¤ºå›¾ç‰‡çš„è½½ä½“ï¼Œé‚£ä¹ˆç”Ÿæˆå›¾ç‰‡srcå¿…ä¸å¯å°‘çš„ã€‚æ— è®ºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯spaï¼Œè¿˜æ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œæˆ‘ä»¬è¿™é‡Œéƒ½è¦ç”¨base64å‚¨å­˜å›¾ç‰‡çš„ä¿¡æ¯ã€‚æ‰€ä»¥éœ€è¦æŠŠç”Ÿæˆçš„äºŒç»´ç è½¬åŒ–æˆbase64ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹æ€è·¯ã€‚


**æ¢³ç†å…·ä½“æ€è·¯**

ç¬¬ä¸€æ­¥:æˆ‘ä»¬éœ€è¦å°†ç›®æ ‡äºŒç»´ç é“¾æ¥ç”ŸæˆäºŒç»´ç ã€‚

ç¬¬äºŒæ­¥ï¼šå°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„äºŒç»´ç è½¬åŒ–æˆbase64æ ¼å¼urlï¼Œå¹¶ä¿å­˜urlã€‚

ç¬¬ä¸‰æ­¥ï¼šæ‰“å¼€æ–°é¡µé¢ï¼Œè·å–ä¿å­˜çš„urlï¼Œå±•ç¤ºç”Ÿæˆçš„äºŒç»´ç ã€‚

### å¼•å…¥arale-qrcodeåº“

é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†è¿æ¥ç»˜åˆ¶æˆäºŒç»´ç ï¼Œé‚£ä¹ˆæˆ‘åœ¨è¿™é‡Œç»™å¤§å®¶æ¨èä¸€ä¸ªå½¢æˆäºŒç»´ç çš„åº“arale-qrcodeã€‚å®ƒå¯ä»¥æ ¹æ®ä¼ å…¥çš„äºŒç»´ç é“¾æ¥ç”Ÿæˆsvgæˆ–tableå½¢å¼çš„domèŠ‚ç‚¹ã€‚

````js
import AraleQRCode from 'arale-qrcode'
const result = new AraleQRCode({
  	render:  "svg",  /*  ç”Ÿæˆçš„ç±»å‹ 'svg' or 'table domå…ƒç´ ç±»å‹ */
  	text:'https://juejin.im/post/6895011670301605896', /* äºŒç»´ç çš„é“¾æ¥*/
  	size: 100                                          /* äºŒç»´ç çš„å¤§å° */
})

console.log(result)
````

æˆ‘ä»¬çœ‹çœ‹AraleQRCodeæŠŠäºŒç»´ç é“¾æ¥å˜æˆäº†ä»€ä¹ˆä¸œè¥¿ã€‚



æ²¡é”™ï¼ŒAraleQRCode æŠŠæˆ‘ä»¬çš„äºŒç»´ç å˜æˆäº†,çœŸæ˜¯çš„domçš„èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯åœ¨å½“å‰é¡µé¢å±•ç¤ºï¼Œç°åœ¨å·²ç»æ»¡è¶³éœ€æ±‚äº†ï¼Œç„¶è€Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„è¦åœ¨æ–°çš„é¡µé¢ä¸­å±•ç¤ºç”Ÿæˆçš„äºŒç»´ç ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æƒ³çš„æ˜¯æ€ä¹ˆæŠŠå½“å‰çš„**nodeèŠ‚ç‚¹è½¬åŒ–æˆbase64**

### XMLSerializeråºåˆ—åŒ–node

æ¥ä¸‹æ¥æˆ‘ä»¬å¯èƒ½ç”¨åˆ°ä¸€ä¸ªä¸æ€ä¹ˆå¸¸ç”¨çš„api XMLSerializer,å®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
XMLSerializer å¯¹è±¡ä½¿ä½ èƒ½å¤ŸæŠŠä¸€ä¸ª XML æ–‡æ¡£æˆ– Node å¯¹è±¡è½¬åŒ–æˆ–â€œåºåˆ—åŒ–â€ä¸ºæœªè§£æçš„ XML æ ‡è®°çš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å…·ä½“ä½¿ç”¨æˆ‘ä»¬ä¸éœ€è¦å¸¦å‚æ•°å»å®ä¾‹åŒ–å®ƒï¼Œç„¶åè°ƒç”¨serializeToStringæ–¹æ³• nodeå¯¹è±¡å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

ä¾‹å­ï¼š

````js
const div = document.createElement('div')
div.innerText = 'hello,world'
const result = new XMLSerializer().serializeToString(div)
console.log(result)
````
æˆ‘ä»¬çœ‹çœ‹XMLSerializeråˆ°åº•åšäº†ä»€ä¹ˆã€‚ 

æ²¡é”™ï¼Œè¿™æ ·å°±è®²ä¸€ä¸ªçœŸæ˜¯domå˜æˆäº†å­—ç¬¦ä¸²ã€‚å›åˆ°æ­£é¢˜ä¸Šæ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸Šä¸€æ­¥ç”Ÿæˆçš„svg xmlæ–‡æ¡£è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚


````js
import AraleQRCode from 'arale-qrcode'
const result = new AraleQRCode({
  	render:  "svg",  /*  ç”Ÿæˆçš„ç±»å‹ 'svg' or 'table domå…ƒç´ ç±»å‹ */
  	text:'https://juejin.im/post/6895011670301605896', /* äºŒç»´ç çš„é“¾æ¥*/
  	size: 100                                          /* äºŒç»´ç çš„å¤§å° */
})
const svgXml = new XMLSerializer().serializeToString(result)
console.log(svgXml)
````

æ‰“å°ç»“æœå¦‚ä¸‹ï¼š


**æ³¨æ„ï¼šXMLSerializer å¯¹äºieæµè§ˆå™¨å­˜åœ¨ç€å…¼å®¹æ€§,æ‰€ä»¥æˆ‘ä»¬è¦åšé¢å¤–çš„å…¼å®¹å¤„ç†ã€‚**

### window.btoaè½¬åŒ–æˆurl,è·¨é¡µé¢ä¼ é€’url

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æŠŠæ–°å‡ºç‚‰çš„svgå­—ç¬¦çªœè½¬æˆbase64æ ¼å¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡  window.btoaæ–¹æ³•ã€‚åˆ›å»ºä¸€ä¸ª base-64 ç¼–ç çš„å­—ç¬¦ä¸²ã€‚
é™¤äº†ç”¨åˆ°window.btoaå¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äºŒæ¬¡è½¬ç 
**encodeURIComponent** å­—ç¬¦ä¸²ä½œä¸º URI ç»„ä»¶è¿›è¡Œç¼–ç å’Œè§£ç ã€‚
**unescape** å¯å¯¹ç¼–ç çš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ã€‚

````js
 const src = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgXml)))
````
ç»ˆäºç”Ÿæˆäº†æˆ‘ä»¬æƒ³è¦çš„base64æ ¼å¼çš„å›¾ç‰‡urlï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åšçš„æ˜¯è·¨é¡µé¢ä¼ é€’urlã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œç”±äºæˆ‘ä»¬ç”¨çš„æ˜¯æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ï¼Œè€Œä¸”ç”Ÿæˆçš„base64æ–‡ä»¶ä¸ä¼šå¾ˆå¤§,æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç”¨**æœ¬åœ°å­˜å‚¨**å†å¥½ä¸è¿‡ã€‚

````js
localStorage.setItem('image',src)
window.open('http://localhost:8888/image')
````
å°†ä¸Šä¸€æ­¥çš„srcä¿å­˜èµ·æ¥ã€‚è¿™æ ·å°±å®Œæˆäº†urlçš„ç”Ÿæˆåˆ°ä¿å­˜ã€‚

å®Œæ•´çš„ä»£ç å¦‚ä¸‹
**ç”ŸæˆäºŒç»´ç é¡µé¢**
````js
const index = () => {
  const text = ()=>{
    const result = new AraleQRCode({
       render:  "svg",                                    /*  ç”Ÿæˆçš„ç±»å‹ 'svg' or 'table domå…ƒç´ ç±»å‹ */
  	   text:'https://juejin.im/post/6895011670301605896', /* äºŒç»´ç çš„é“¾æ¥*/
  	   size: 100                                          /* äºŒç»´ç çš„å¤§å° */
    })
    const svgXml = new XMLSerializer().serializeToString(result)
    const src = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgXml)))
    localStorage.setItem('image',src)
    window.open('http://localhost:8888/image')
  }
  return <div className="page" >
    <p className="cur" > å½“å‰url: <span> https://juejin.im/post/6895011670301605896 </span> </p>
    <div className="btns" >
        <button onClick={text } >ç‚¹å‡»ç”ŸæˆäºŒç»´ç </button>
    </div>
  </div>
}
````

**æ¥å—äºŒç»´ç é¡µé¢**
````js
function index(){
    const img:any = localStorage.getItem('image')
    localStorage.removeItem('image')
   return <div className="mast" >
      <div className="img_content" > <img src={img} /></div>
   </div>
}
````
**æ³¨æ„ï¼šå½“æˆ‘ä»¬æ¥å—åˆ°urlçš„æ—¶å€™ï¼Œåˆ«å¿˜äº†æ¸…é™¤ç¼“å­˜ã€‚**

## å†™åœ¨åé¢ 

ä¸Šé¢æ€»ç»“äº†ä¸€ä¸ªç”Ÿæˆ+è·¨é¡µé¢å±•ç°äºŒç»´ç çš„å…·ä½“å®ç°æ–¹æ¡ˆï¼Œè€Œä¸”å·²ç»åº”ç”¨åœ¨çœŸæ­£çš„é¡¹ç›®ä¸­äº†ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼ŒåŒå­¦ä»¬å¦‚æœé‡åˆ°ç±»ä¼¼é—®é¢˜ï¼Œå¸Œæœ›è¿™ç‰‡æ–‡ç« èƒ½ç»™å¤§å®¶å¸¦æ¥è§£å†³æ­¤ç±»é—®é¢˜çš„æ€è·¯ã€‚

ç›¸å…³å‰ç«¯æŠ€æœ¯å°æŠ€å·§domeæ–‡ç« ï¼š

(h5,å°ç¨‹åºé£å…¥è´­ç‰©è½¦(æŠ›ç‰©çº¿ç»˜åˆ¶è¿åŠ¨è½¨è¿¹ç‚¹))[https://juejin.im/post/6884420198389973000] :260+ ğŸ‘


æœ€åè°¢è°¢å¤§å®¶é˜…è¯»ï¼Œå¤§å®¶å¦‚æœè§‰å¾—è¿˜ä¸é”™çš„è¯ï¼Œå°± ç‚¹èµ + å…³æ³¨ ä¸€æ³¢ï¼ŒæŒç»­åˆ†äº«æŠ€æœ¯æ–‡ç« ã€‚
å…¬ä¼—å·ï¼šå‰ç«¯Sharing